(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{7460:function(e,i,s){"use strict";s.d(i,{AS:function(){return r},Ot:function(){return l},Tu:function(){return n},c0:function(){return u},d8:function(){return d},lZ:function(){return t},ut:function(){return a},vc:function(){return c}}),s(80);var n="bumawiki_bmvkri6",a="bumawiki_bmvkri3",r="bumawiki_bmvkri1",t="bumawiki_bmvkri5",c="bumawiki_bmvkri4",l="bumawiki_bmvkri2",u="bumawiki_bmvkri0",d={BUYING:"bumawiki_bmvkri8 bumawiki_bmvkri7",SELLING:"bumawiki_bmvkri9 bumawiki_bmvkri7",BOUGHT:"bumawiki_bmvkria bumawiki_bmvkri7",SOLD:"bumawiki_bmvkrib bumawiki_bmvkri7",CANCELLED:"bumawiki_bmvkric bumawiki_bmvkri7",DELISTING:"bumawiki_bmvkrid bumawiki_bmvkri7"}},1895:function(e,i,s){"use strict";s.r(i),s.d(i,{content:function(){return n}}),s(2053);var n="bumawiki_b6ky8q0"},4338:function(e,i,s){Promise.resolve().then(s.bind(s,3338)),Promise.resolve().then(s.bind(s,2693)),Promise.resolve().then(s.bind(s,4727)),Promise.resolve().then(s.bind(s,7404)),Promise.resolve().then(s.bind(s,9434)),Promise.resolve().then(s.bind(s,5368)),Promise.resolve().then(s.bind(s,2736)),Promise.resolve().then(s.bind(s,4671)),Promise.resolve().then(s.bind(s,8972)),Promise.resolve().then(s.bind(s,4039)),Promise.resolve().then(s.bind(s,8749)),Promise.resolve().then(s.bind(s,6838)),Promise.resolve().then(s.bind(s,3668)),Promise.resolve().then(s.bind(s,3584))},3338:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return H}});var n=s(1590),a=s(8511),r=s(3488),t=s(7404),c=s(8749),l=s(9373),u=s(929),d=s(5967),m=s(5313),o=s(1819),h=s(1179),b=s(4671),v=s(2413);let p=()=>{let{closeModal:e}=(0,d.dd)(),i=(0,t.useQueryClient)();return(0,b.useMutation)({mutationFn:v.p6,onSuccess:()=>{i.invalidateQueries({queryKey:["query.myWallet"]}),e()}})},k=()=>(0,b.useMutation)({mutationFn:v.MN}),j=()=>(0,b.useMutation)({mutationFn:v.d8}),x=()=>(0,b.useMutation)({mutationFn:v.ZL}),N=()=>(0,b.useMutation)({mutationFn:v.e$});var f=s(3773),w=s(2149),_=s(5594),y=s(7493);s(9426);var L={DISABLED:"bumawiki_pn4rn5r",ENABLED:"bumawiki_pn4rn5t bumawiki_pn4rn5r"},S="bumawiki_pn4rn5o",E="bumawiki_pn4rn54",g="bumawiki_pn4rn52",B="bumawiki_pn4rn53",C="bumawiki_pn4rn5h",D="bumawiki_pn4rn5c",A="bumawiki_pn4rn5e",q="bumawiki_pn4rn5d",P={BUY:"bumawiki_pn4rn59 bumawiki_pn4rn58",SELL:"bumawiki_pn4rn5a bumawiki_pn4rn58",DISABLED:"bumawiki_pn4rn5b bumawiki_pn4rn58"},Q="bumawiki_pn4rn51",Y=s(938),M=s(3400),U=s.n(M),I=s(3861);I.kL.register(I.uw,I.f$,I.od,I.jn,I.Gu,I.Dx,I.u,I.De);let Z={responsive:!0,pointStyle:"circle",pointBorderWidth:0,cubicInterpolationMode:"monotone",plugins:{legend:{display:!1},title:{display:!1}},interaction:{intersect:!1}},T=[{name:"전체",id:"full"},{name:"보름",id:"halfMonth"},{name:"일주일",id:"week"},{name:"하루",id:"day"},{name:"12시간",id:"halfDay"},{name:"3시간",id:"threeHours"}];var K=e=>{let{updatedAt:i,marketPrice:s,refetch:a}=e,{formatDate:t}=(0,d.Yc)(),m=180-U()().diff(U()(i),"second"),[o,b]=(0,r.useState)("threeHours"),{data:v,refetch:p,isSuccess:k}=(0,c.useQuery)(l.r.graph(o)),j=v.map(e=>{let{startedTime:i}=e;return U()(i).format("M/D H:m")}),x=v.map(e=>{let{price:i}=e;return i});return((0,r.useEffect)(()=>{setTimeout(()=>{a(),p()},1e3*m)},[i]),k)?(0,n.jsxs)("div",{className:"bumawiki_pn4rn5j",children:[(0,n.jsxs)("div",{className:"bumawiki_pn4rn5k",children:[(0,n.jsxs)("div",{className:"bumawiki_pn4rn5l",children:[(0,n.jsx)(u.default,{alt:"bumacoin",src:"/assets/bumacoin.png",width:62,height:62}),(0,n.jsxs)("div",{className:"bumawiki_pn4rn5m",children:[(0,n.jsxs)("span",{className:"bumawiki_pn4rn5n",children:["₩",(0,h.ar)(s)]}),(0,n.jsx)("span",{className:S,children:t(i)}),(0,n.jsx)("span",{className:S,children:"3분마다 업데이트됩니다."})]})]}),(0,n.jsx)("div",{className:"bumawiki_pn4rn5q",children:T.map(e=>{let i=o===e.id?L.ENABLED:L.DISABLED;return(0,n.jsx)("button",{onClick:()=>b(e.id),className:i,children:e.name},e.id)})})]}),(0,n.jsx)(Y.x1,{options:Z,data:{labels:j,datasets:[{data:x,fill:!0,label:"부마코인",borderColor:"#274168",borderWidth:1.5,backgroundColor:"#274168AA"}]}})]}):null},G=s(1214),W=s(7460),O=e=>{let{id:i}=e,{formatDate:s}=(0,d.Yc)(),{data:a,isSuccess:r}=(0,c.useQuery)(l.r.trade(i)),{mutate:b}=N(),v=(0,t.useQueryClient)(),p=e=>{b(e,{onSuccess:()=>{(0,m.Am)((0,n.jsx)(o.Z,{content:"거래를 취소했어요!"})),v.invalidateQueries({queryKey:["query.graph"]}),v.invalidateQueries({queryKey:["query.myWallet"]}),v.invalidateQueries({queryKey:["query.coinTrade",i]}),v.invalidateQueries({queryKey:["query.price"]})}})};return(0,n.jsx)("div",{children:r&&a.map(e=>(0,n.jsxs)("div",{className:W.c0,children:[(0,n.jsxs)("div",{className:W.AS,children:[(0,n.jsx)("div",{className:W.d8[e.tradeStatus]}),(0,n.jsxs)("h1",{className:W.Ot,children:[G.C1[e.tradeStatus],"#",e.id]}),e.tradedTime&&(0,n.jsxs)("span",{className:W.ut,children:["거래일 \xb7\xa0",s(e.tradedTime)]})]}),(0,n.jsxs)("div",{className:W.lZ,children:[(0,n.jsxs)("span",{className:W.vc,children:[(0,n.jsx)(u.default,{src:"/assets/bumamoney.png",alt:"money",width:30,height:15}),(0,h.ar)(e.coinPrice)]}),(0,n.jsxs)("span",{className:W.vc,children:[(0,n.jsx)(u.default,{src:"/assets/bumacoin.png",alt:"money",width:18,height:18}),(0,h.ar)(e.coinCount)]})]}),(0,n.jsxs)("span",{className:W.vc,children:["총 거래 금액 \xb7 ",(0,h.ar)(e.usedMoney)]}),["BUYING","SELLING"].includes(e.tradeStatus)&&(0,n.jsx)("div",{onClick:()=>p(e.id),className:W.Tu,children:"취소"})]},e.id))})};let F={BUY:{trade:"매수",before:"머니",period:"₩"},SELL:{trade:"매도",before:"코인",period:""}};var H=()=>{var e;let i=(0,t.useQueryClient)(),{data:s,refetch:b,isSuccess:v}=(0,c.useQuery)(l.r.price()),{data:N,error:L}=(0,c.useQuery)(l.r.myWallet()),{mutate:S}=x(),{mutate:Y}=k(),{mutate:M}=j(),{mutate:U}=p(),{openConfirm:I}=(0,d.dd)(),[Z,T]=(0,r.useState)("BUY"),[G,W]=(0,r.useState)(0);if((0,f.IZ)(L)&&(null===(e=L.response)||void 0===e?void 0:e.data.status)===404)return I({icon:(0,n.jsx)(y.fN,{}),content:"지금 바로 부마코인을 시작해보세요!\n기본지원금 1000만원을 드려요 \uD83D\uDE0E",onConfirm:U}),(0,n.jsx)("div",{children:"코인 계정 생성 후 이용해주세요."});if(!N)return(0,n.jsx)("div",{children:"로그인 후 이용해주세요."});if(!v)return null;let H=s.price*N.coin+N.money,$=Math.floor(N.money/s.price),z=N.money-G*s.price,J=N.money-z,R=N.coin,V=N.coin-G,X=()=>({onSuccess:()=>{i.invalidateQueries({queryKey:["query.myWallet"]}),i.invalidateQueries({queryKey:["query.coinTrade",N.id]}),W(0),(0,m.Am)((0,n.jsx)(o.Z,{content:"성공적으로 거래를 요청했어요!"}))}});return(0,n.jsxs)(a.default,{title:"부마코인",docsType:"코인",children:[(0,n.jsx)("h1",{className:"bumawiki_pn4rn5u",children:"※ 코인 가격이 0이 되면 상장 폐지되어 보유 중이던 코인이 삭제됩니다.※"}),(0,n.jsxs)("div",{className:"bumawiki_pn4rn50",children:[(0,n.jsxs)("div",{className:Q,children:[(0,n.jsx)(_.default,{href:"/coin/rank",className:C,children:"자산 랭킹"}),(0,n.jsx)("button",{onClick:()=>{S(void 0,{onSuccess:e=>{(0,m.Am)((0,n.jsx)(o.Z,{content:"".concat((0,h.ar)(e),"원을 받았어요!")})),i.invalidateQueries({queryKey:["query.myWallet"]})},onError:e=>{if(e instanceof f.d7){var i;(0,m.Am)((0,n.jsx)(o.Z,{content:null===(i=e.response)||void 0===i?void 0:i.data.message}))}}})},className:C,children:"일일 보상 받기"})]}),(0,n.jsxs)("div",{className:Q,children:[(0,n.jsxs)("div",{className:g,children:[(0,n.jsx)("div",{className:B,children:"보유 총액"}),(0,n.jsxs)("div",{className:E,children:[(0,n.jsx)(y.o,{}),(0,n.jsx)("div",{className:E,children:(0,h.ar)(H)})]})]}),(0,n.jsxs)("div",{className:g,children:[(0,n.jsx)("div",{className:B,children:"보유 코인"}),(0,n.jsxs)("div",{className:E,children:[(0,n.jsx)(u.default,{alt:"bumacoin",src:"/assets/bumacoin.png",width:20,height:20}),(0,n.jsx)("div",{className:E,children:(0,h.ar)(N.coin)})]})]}),(0,n.jsxs)("div",{className:g,children:[(0,n.jsx)("div",{className:B,children:"보유 머니"}),(0,n.jsxs)("div",{className:E,children:[(0,n.jsx)(u.default,{alt:"bumacoin",src:"/assets/bumamoney.png",width:36,height:18}),(0,n.jsx)("div",{className:E,children:(0,h.ar)(N.money)})]})]})]})]}),(0,n.jsx)("div",{className:"bumawiki_pn4rn55",children:(0,n.jsxs)("div",{className:"bumawiki_pn4rn56",children:[(0,n.jsxs)("div",{className:"bumawiki_pn4rn57",children:[(0,n.jsx)("div",{className:P["BUY"===Z?Z:"DISABLED"],onClick:()=>{T("BUY"),W(0)},children:"BMC 매수"}),(0,n.jsx)("div",{className:P["SELL"===Z?Z:"DISABLED"],onClick:()=>{T("SELL"),W(0)},children:"BMC 매도"})]}),(0,n.jsxs)("figure",{className:D,children:[(0,n.jsx)("h1",{className:q,children:"가격"}),(0,n.jsxs)("span",{className:A,children:["1 BMC \xa0=\xa0 ₩",(0,h.ar)(s.price)]})]}),(0,n.jsxs)("figure",{className:D,children:[(0,n.jsxs)("h1",{className:q,children:[F[Z].trade," 가능"]}),(0,n.jsxs)("span",{className:A,children:[(0,h.ar)("BUY"===Z?$:R),"주"]})]}),(0,n.jsxs)("figure",{className:D,children:[(0,n.jsxs)("h1",{className:q,children:[F[Z].trade," 수량"]}),(0,n.jsx)("input",{className:"bumawiki_pn4rn5g",onChange:e=>{let{target:{value:i}}=e,n=Number(i);Number.isNaN(n)||"BUY"===Z&&n*s.price>N.money||"SELL"===Z&&n>N.coin||W(n)},value:G}),(0,n.jsx)("span",{className:"bumawiki_pn4rn5i",children:"주"}),(0,n.jsxs)("span",{className:"bumawiki_pn4rn5f",children:["총 ",(0,h.ar)("BUY"===Z?$:R),"주를"," ",F[Z].trade,"할 수 있어요"]})]}),(0,n.jsxs)("figure",{className:D,children:[(0,n.jsxs)("div",{className:q,children:["총 거래 ",F[Z].before]}),(0,n.jsxs)("span",{className:A,children:[F[Z].period,(0,h.ar)("BUY"===Z?J:G)]})]}),(0,n.jsxs)("figure",{className:D,children:[(0,n.jsxs)("div",{className:q,children:["거래 후 보유 ",F[Z].before]}),(0,n.jsxs)("span",{className:A,children:[F[Z].period,(0,h.ar)("BUY"===Z?z:V)]})]}),"SELL"===Z&&(0,n.jsxs)("figure",{className:D,children:[(0,n.jsx)("div",{className:q,children:"총 매도 이익"}),(0,n.jsxs)("span",{className:A,children:["₩",(0,h.ar)(G*s.price)]})]}),"BUY"===Z?(0,n.jsx)("button",{onClick:()=>{if(!G)return(0,m.Am)((0,n.jsx)(o.Z,{content:"수량을 입력해주세요."}));I({content:"".concat((0,h.ar)(G),"주를 주당 ").concat((0,h.ar)(s.price),"원에 매수합니다."),onConfirm:()=>Y({marketPrice:s.price,requestAmount:G},X())})},className:C,children:"매수"}):(0,n.jsx)("button",{onClick:()=>{if(!G)return(0,m.Am)((0,n.jsx)(o.Z,{content:"수량을 입력해주세요."}));I({content:"".concat((0,h.ar)(G),"주를 주당 ").concat((0,h.ar)(s.price),"원에 매도합니다."),onConfirm:()=>M({marketPrice:s.price,requestAmount:G},X())})},className:C,children:"매도"})]})}),(0,n.jsx)(K,{refetch:()=>{b()},updatedAt:s.startedTime,marketPrice:s.price}),(0,n.jsx)(w.Z,{title:"거래 내역 보기",open:!1,children:(0,n.jsx)(O,{id:N.id})})]})}},2149:function(e,i,s){"use strict";var n=s(1590),a=s(3018),r=s(1895);i.Z=e=>{let{title:i,open:s=!0,children:t}=e;return(0,n.jsxs)("details",{className:a.details,open:s,children:[(0,n.jsx)("summary",{className:a.summary,children:i}),(0,n.jsx)("article",{className:r.content,children:t})]})}}},function(e){e.O(0,[748,714,943,862,75,977,637,583,759,750,744],function(){return e(e.s=4338)}),_N_E=e.O()}]);